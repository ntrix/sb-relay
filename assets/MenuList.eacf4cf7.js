var j=Object.defineProperty;var m=(r,e)=>j(r,"name",{value:e,configurable:!0});import{b as T,_ as A}from"./useThemeProps.8c227988.js";import{r as c}from"./index.a4b8bac3.js";import{L as _}from"./List.b13e919f.js";import{j as N}from"./jsx-runtime.1558fe13.js";import{g as O}from"./getScrollbarSize.bc370221.js";import{a as M}from"./ownerWindow.bb519db8.js";import{u as $}from"./useEnhancedEffect.acfecbd0.js";import{u as z}from"./useForkRef.538eb251.js";const P=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function w(r,e,n){return r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:r.firstChild}m(w,"nextItem");function v(r,e,n){return r===e?n?r.firstChild:r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:r.lastChild}m(v,"previousItem");function E(r,e){if(e===void 0)return!0;let n=r.innerText;return n===void 0&&(n=r.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}m(E,"textCriteriaMatches");function g(r,e,n,x,h,y){let p=!1,u=h(r,e,e?n:!1);for(;u;){if(u===r.firstChild){if(p)return!1;p=!0}const d=x?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!E(u,y)||d)u=h(r,u,n);else return u.focus(),!0}return!1}m(g,"moveFocus");const W=c.exports.forwardRef(m(function(e,n){const{actions:x,autoFocus:h=!1,autoFocusItem:y=!1,children:p,className:u,disabledItemsFocusable:d=!1,disableListWrap:b=!1,onKeyDown:k,variant:C="selectedMenu"}=e,F=T(e,P),a=c.exports.useRef(null),L=c.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$(()=>{h&&a.current.focus()},[h]),c.exports.useImperativeHandle(x,()=>({adjustStyleForScrollbar:(t,s)=>{const l=!a.current.style.width;if(t.clientHeight<a.current.clientHeight&&l){const f=`${O(M(t))}px`;a.current.style[s.direction==="rtl"?"paddingLeft":"paddingRight"]=f,a.current.style.width=`calc(100% + ${f})`}return a.current}}),[]);const S=m(t=>{const s=a.current,l=t.key,f=M(s).activeElement;if(l==="ArrowDown")t.preventDefault(),g(s,f,b,d,w);else if(l==="ArrowUp")t.preventDefault(),g(s,f,b,d,v);else if(l==="Home")t.preventDefault(),g(s,null,b,d,w);else if(l==="End")t.preventDefault(),g(s,null,b,d,v);else if(l.length===1){const i=L.current,D=l.toLowerCase(),I=performance.now();i.keys.length>0&&(I-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&D!==i.keys[0]&&(i.repeating=!1)),i.lastTime=I,i.keys.push(D);const H=f&&!i.repeating&&E(f,i);i.previousKeyMatched&&(H||g(s,f,!1,d,w,i))?t.preventDefault():i.previousKeyMatched=!1}k&&k(t)},"handleKeyDown"),K=z(a,n);let o=-1;c.exports.Children.forEach(p,(t,s)=>{if(!c.exports.isValidElement(t)){o===s&&(o+=1,o>=p.length&&(o=-1));return}t.props.disabled||(C==="selectedMenu"&&t.props.selected||o===-1)&&(o=s),o===s&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(o+=1,o>=p.length&&(o=-1))});const R=c.exports.Children.map(p,(t,s)=>{if(s===o){const l={};return y&&(l.autoFocus=!0),t.props.tabIndex===void 0&&C==="selectedMenu"&&(l.tabIndex=0),c.exports.cloneElement(t,l)}return t});return N(_,A({role:"menu",ref:K,className:u,onKeyDown:S,tabIndex:h?0:-1},F,{children:R}))},"MenuList")),Z=W;export{Z as M};
//# sourceMappingURL=MenuList.eacf4cf7.js.map
