var T=Object.defineProperty;var d=(t,e)=>T(t,"name",{value:e,configurable:!0});import{k as A,_ as H}from"./useThemeProps.8b6b0273.js";import{r as f,j as _}from"./jsx-runtime.3284e85a.js";import"./index.cd759284.js";import{g as N}from"./getScrollbarSize.bc370221.js";import{a as M}from"./ownerWindow.bb519db8.js";import{L as O}from"./List.a1273484.js";import{u as $}from"./useEnhancedEffect.e4ffe690.js";import{u as z}from"./useForkRef.581eeb10.js";const P=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function w(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}d(w,"nextItem");function v(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}d(v,"previousItem");function E(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}d(E,"textCriteriaMatches");function h(t,e,n,y,p,g){let m=!1,l=p(t,e,e?n:!1);for(;l;){if(l===t.firstChild){if(m)return!1;m=!0}const c=y?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!E(l,g)||c)l=p(t,l,n);else return l.focus(),!0}return!1}d(h,"moveFocus");const W=f.exports.forwardRef(d(function(e,n){const{actions:y,autoFocus:p=!1,autoFocusItem:g=!1,children:m,className:l,disabledItemsFocusable:c=!1,disableListWrap:x=!1,onKeyDown:k,variant:C="selectedMenu"}=e,F=A(e,P),u=f.exports.useRef(null),K=f.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$(()=>{p&&u.current.focus()},[p]),f.exports.useImperativeHandle(y,()=>({adjustStyleForScrollbar:(r,i)=>{const o=!u.current.style.width;if(r.clientHeight<u.current.clientHeight&&o){const a=`${N(M(r))}px`;u.current.style[i.direction==="rtl"?"paddingLeft":"paddingRight"]=a,u.current.style.width=`calc(100% + ${a})`}return u.current}}),[]);const L=d(r=>{const i=u.current,o=r.key,a=M(i).activeElement;if(o==="ArrowDown")r.preventDefault(),h(i,a,x,c,w);else if(o==="ArrowUp")r.preventDefault(),h(i,a,x,c,v);else if(o==="Home")r.preventDefault(),h(i,null,x,c,w);else if(o==="End")r.preventDefault(),h(i,null,x,c,v);else if(o.length===1){const s=K.current,D=o.toLowerCase(),I=performance.now();s.keys.length>0&&(I-s.lastTime>500?(s.keys=[],s.repeating=!0,s.previousKeyMatched=!0):s.repeating&&D!==s.keys[0]&&(s.repeating=!1)),s.lastTime=I,s.keys.push(D);const j=a&&!s.repeating&&E(a,s);s.previousKeyMatched&&(j||h(i,a,!1,c,w,s))?r.preventDefault():s.previousKeyMatched=!1}k&&k(r)},"handleKeyDown"),S=z(u,n);let b=-1;f.exports.Children.forEach(m,(r,i)=>{!f.exports.isValidElement(r)||r.props.disabled||(C==="selectedMenu"&&r.props.selected||b===-1)&&(b=i)});const R=f.exports.Children.map(m,(r,i)=>{if(i===b){const o={};return g&&(o.autoFocus=!0),r.props.tabIndex===void 0&&C==="selectedMenu"&&(o.tabIndex=0),f.exports.cloneElement(r,o)}return r});return _(O,H({role:"menu",ref:S,className:l,onKeyDown:L,tabIndex:p?0:-1},F,{children:R}))},"MenuList")),Z=W;export{Z as M};
//# sourceMappingURL=MenuList.bf895852.js.map
